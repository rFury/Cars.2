import './polyfills.server.mjs';
import{$ as or,A as Ne,Aa as gr,B as Oe,Ba as vr,C as ee,D,Da as R,E as A,Ea as _r,F as Pt,Fa as yr,G as d,Ga as Cr,H as u,I as we,J as Y,K as M,L as E,M as g,N as z,O as rt,P as I,Q as F,R as x,S as se,T as N,V as nr,W as ir,a as Ze,b as xe,ba as sr,c as Zt,ca as Re,d as Qe,da as ce,e as Qt,ea as ar,f as Rt,fa as Gt,g as er,h as et,ha as ue,i as ve,ia as de,j as H,ja as lr,k as _e,ka as cr,l as le,la as O,m as G,ma as nt,n as tt,na as it,o as U,oa as ot,p as ye,pa as ur,q as B,qa as dr,r as tr,ra as hr,s as rr,sa as pr,t as W,ta as fr,u as $,v as Te,w as Ce,wa as mr,x as Ue,y as _,z as y}from"./chunk-X3GBNZCU.mjs";import{a as j,b as q,h as k}from"./chunk-5XUXGTUW.mjs";var Dr=(()=>{class r{constructor(t,n){this._renderer=t,this._elementRef=n,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(Ue))}}static{this.\u0275dir=B({type:r})}}return r})(),pt=(()=>{class r extends Dr{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Te(r)))(o||r)}})()}static{this.\u0275dir=B({type:r,features:[ee]})}}return r})(),We=new le("");var ln={provide:We,useExisting:ve(()=>X),multi:!0};function cn(){let r=Gt()?Gt().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var un=new le(""),X=(()=>{class r extends Dr{constructor(t,n,o){super(t,n),this._compositionMode=o,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!cn())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static{this.\u0275fac=function(n){return new(n||r)(y(Ne),y(Ue),y(un,8))}}static{this.\u0275dir=B({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,o){n&1&&M("input",function(b){return o._handleInput(b.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(b){return o._compositionEnd(b.target.value)})},features:[se([ln]),ee]})}}return r})();var Ir=new le(""),Fr=new le("");function xr(r){return r!=null}function Tr(r){return nr(r)?xe(r):r}function Ur(r){let e={};return r.forEach(t=>{e=t!=null?j(j({},e),t):e}),Object.keys(e).length===0?null:e}function Nr(r,e){return e.map(t=>t(r))}function dn(r){return!r.validate}function Or(r){return r.map(e=>dn(e)?e:t=>e.validate(t))}function hn(r){if(!r)return null;let e=r.filter(xr);return e.length==0?null:function(t){return Ur(Nr(t,e))}}function jt(r){return r!=null?hn(Or(r)):null}function pn(r){if(!r)return null;let e=r.filter(xr);return e.length==0?null:function(t){let n=Nr(t,e).map(Tr);return er(n).pipe(Qe(Ur))}}function Ht(r){return r!=null?pn(Or(r)):null}function wr(r,e){return r===null?[e]:Array.isArray(r)?[...r,e]:[r,e]}function fn(r){return r._rawValidators}function mn(r){return r._rawAsyncValidators}function Lt(r){return r?Array.isArray(r)?r:[r]:[]}function at(r,e){return Array.isArray(r)?r.includes(e):r===e}function br(r,e){let t=Lt(e);return Lt(r).forEach(o=>{at(t,o)||t.push(o)}),t}function Sr(r,e){return Lt(e).filter(t=>!at(r,t))}var lt=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=jt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ht(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ee=class extends lt{get formDirective(){return null}get path(){return null}},Be=class extends lt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ct=class{constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},gn={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ti=q(j({},gn),{"[class.ng-submitted]":"isSubmitted"}),te=(()=>{class r extends ct{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||r)(y(Be,2))}}static{this.\u0275dir=B({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,o){n&2&&Pt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},features:[ee]})}}return r})(),ft=(()=>{class r extends ct{constructor(t){super(t)}static{this.\u0275fac=function(n){return new(n||r)(y(Ee,10))}}static{this.\u0275dir=B({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,o){n&2&&Pt("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},features:[ee]})}}return r})();var Pe="VALID",st="INVALID",ke="PENDING",Ge="DISABLED",Ve=class{},ut=class extends Ve{constructor(e,t){super(),this.value=e,this.source=t}},je=class extends Ve{constructor(e,t){super(),this.pristine=e,this.source=t}},He=class extends Ve{constructor(e,t){super(),this.touched=e,this.source=t}},Me=class extends Ve{constructor(e,t){super(),this.status=e,this.source=t}};function Rr(r){return(mt(r)?r.validators:r)||null}function vn(r){return Array.isArray(r)?jt(r):r||null}function Pr(r,e){return(mt(e)?e.asyncValidators:r)||null}function _n(r){return Array.isArray(r)?Ht(r):r||null}function mt(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function yn(r,e,t){let n=r.controls;if(!(e?Object.keys(n):n).length)throw new et(1e3,"");if(!n[t])throw new et(1001,"")}function Cn(r,e,t){r._forEachChild((n,o)=>{if(t[o]===void 0)throw new et(1002,"")})}var dt=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=null,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this._status=Re(()=>this.statusReactive()),this.statusReactive=Oe(void 0),this._pristine=Re(()=>this.pristineReactive()),this.pristineReactive=Oe(!0),this._touched=Re(()=>this.touchedReactive()),this.touchedReactive=Oe(!1),this._events=new Ze,this.events=this._events.asObservable(),this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return ce(this.statusReactive)}set status(e){ce(()=>this.statusReactive.set(e))}get valid(){return this.status===Pe}get invalid(){return this.status===st}get pending(){return this.status==ke}get disabled(){return this.status===Ge}get enabled(){return this.status!==Ge}get pristine(){return ce(this.pristineReactive)}set pristine(e){ce(()=>this.pristineReactive.set(e))}get dirty(){return!this.pristine}get touched(){return ce(this.touchedReactive)}set touched(e){ce(()=>this.touchedReactive.set(e))}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(br(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(br(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Sr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Sr(e,this._rawAsyncValidators))}hasValidator(e){return at(this._rawValidators,e)}hasAsyncValidator(e){return at(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(q(j({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new He(!0,n))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new He(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(q(j({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new je(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new je(!0,n))}markAsPending(e={}){this.status=ke;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new Me(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(q(j({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Ge,this.errors=null,this._forEachChild(o=>{o.disable(q(j({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ut(this.value,n)),this._events.next(new Me(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(q(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=Pe,this._forEachChild(n=>{n.enable(q(j({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(q(j({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Pe||this.status===ke)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new ut(this.value,t)),this._events.next(new Me(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(q(j({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ge:Pe}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=ke,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1};let n=Tr(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=this._hasOwnPendingAsyncValidator?.emitEvent??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,o)=>n&&n._find(o),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new Me(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new Ce,this.statusChanges=new Ce}_calculateStatus(){return this._allControlsDisabled()?Ge:this.errors?st:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ke)?ke:this._anyControlsHaveStatus(st)?st:Pe}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),o=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),o&&this._events.next(new je(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new He(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mt(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=vn(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=_n(this._rawAsyncValidators)}},ht=class extends dt{constructor(e,t,n){super(Rr(t),Pr(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){Cn(this,!0,e),Object.keys(e).forEach(n=>{yn(this,!0,n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(n=>{let o=this.controls[n];o&&o.patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,o)=>{n.reset(e?e[o]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t,this),this._updateTouched(t,this),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,n)=>n._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,n]of Object.entries(this.controls))if(this.contains(t)&&e(n))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,n,o)=>((n.enabled||this.disabled)&&(t[o]=n.value),t))}_reduceChildren(e,t){let n=e;return this._forEachChild((o,s)=>{n=t(n,o,s)}),n}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Bt=new le("CallSetDisabledState",{providedIn:"root",factory:()=>Wt}),Wt="always";function wn(r,e){return[...e.path,r]}function Gr(r,e,t=Wt){Lr(r,e),e.valueAccessor.writeValue(r.value),(r.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(r.disabled),Sn(r,e),kn(r,e),An(r,e),bn(r,e)}function Ar(r,e){r.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function bn(r,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(t),e._registerOnDestroy(()=>{r._unregisterOnDisabledChange(t)})}}function Lr(r,e){let t=fn(r);e.validator!==null?r.setValidators(wr(t,e.validator)):typeof t=="function"&&r.setValidators([t]);let n=mn(r);e.asyncValidator!==null?r.setAsyncValidators(wr(n,e.asyncValidator)):typeof n=="function"&&r.setAsyncValidators([n]);let o=()=>r.updateValueAndValidity();Ar(e._rawValidators,o),Ar(e._rawAsyncValidators,o)}function Sn(r,e){e.valueAccessor.registerOnChange(t=>{r._pendingValue=t,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&jr(r,e)})}function An(r,e){e.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&jr(r,e),r.updateOn!=="submit"&&r.markAsTouched()})}function jr(r,e){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function kn(r,e){let t=(n,o)=>{e.valueAccessor.writeValue(n),o&&e.viewToModelUpdate(n)};r.registerOnChange(t),e._registerOnDestroy(()=>{r._unregisterOnChange(t)})}function Mn(r,e){r==null,Lr(r,e)}function En(r,e){if(!r.hasOwnProperty("model"))return!1;let t=r.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Vn(r){return Object.getPrototypeOf(r.constructor)===pt}function Dn(r,e){r._syncPendingControls(),e.forEach(t=>{let n=t.control;n.updateOn==="submit"&&n._pendingChange&&(t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function In(r,e){if(!e)return null;Array.isArray(e);let t,n,o;return e.forEach(s=>{s.constructor===X?t=s:Vn(s)?n=s:o=s}),o||n||t||null}var Fn={provide:Ee,useExisting:ve(()=>$e)},Le=Promise.resolve(),$e=(()=>{class r extends Ee{get submitted(){return ce(this.submittedReactive)}constructor(t,n,o){super(),this.callSetDisabledState=o,this._submitted=Re(()=>this.submittedReactive()),this.submittedReactive=Oe(!1),this._directives=new Set,this.ngSubmit=new Ce,this.form=new ht({},jt(t),Ht(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Le.then(()=>{let n=this._findContainer(t.path);t.control=n.registerControl(t.name,t.control),Gr(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Le.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){Le.then(()=>{let n=this._findContainer(t.path),o=new ht({});Mn(o,t),n.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Le.then(()=>{let n=this._findContainer(t.path);n&&n.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,n){Le.then(()=>{this.form.get(t.path).setValue(n)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submittedReactive.set(!0),Dn(this.form,this._directives),this.ngSubmit.emit(t),t?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(t=void 0){this.form.reset(t),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}static{this.\u0275fac=function(n){return new(n||r)(y(Ir,10),y(Fr,10),y(Bt,8))}}static{this.\u0275dir=B({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,o){n&1&&M("submit",function(b){return o.onSubmit(b)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[se([Fn]),ee]})}}return r})();function kr(r,e){let t=r.indexOf(e);t>-1&&r.splice(t,1)}function Mr(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var xn=class extends dt{constructor(e=null,t,n){super(Rr(t),Pr(n,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mt(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Mr(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){kr(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){kr(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Mr(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Tn={provide:Be,useExisting:ve(()=>Z)},Er=Promise.resolve(),Z=(()=>{class r extends Be{constructor(t,n,o,s,b,S){super(),this._changeDetectorRef=b,this.callSetDisabledState=S,this.control=new xn,this._registered=!1,this.name="",this.update=new Ce,this._parent=t,this._setValidators(n),this._setAsyncValidators(o),this.valueAccessor=In(this,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),En(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Gr(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){Er.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,o=n!==0&&sr(n);Er.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?wn(t,this._parent):[t]}static{this.\u0275fac=function(n){return new(n||r)(y(Ee,9),y(Ir,10),y(Fr,10),y(We,10),y(or,8),y(Bt,8))}}static{this.\u0275dir=B({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[se([Tn]),ee,rr]})}}return r})(),gt=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=B({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return r})(),Un={provide:We,useExisting:ve(()=>ze),multi:!0},ze=(()=>{class r extends pt{writeValue(t){let n=t??"";this.setProperty("value",n)}registerOnChange(t){this.onChange=n=>{t(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Te(r)))(o||r)}})()}static{this.\u0275dir=B({type:r,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,o){n&1&&M("input",function(b){return o.onChange(b.target.value)})("blur",function(){return o.onTouched()})},features:[se([Un]),ee]})}}return r})();var Nn={provide:We,useExisting:ve(()=>he),multi:!0};function Hr(r,e){return r==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${r}: ${e}`.slice(0,50))}function On(r){return r.split(":")[0]}var he=(()=>{class r extends pt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let n=this._getOptionId(t),o=Hr(n,t);this.setProperty("value",o)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=On(t);return this._optionMap.has(n)?this._optionMap.get(n):t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Te(r)))(o||r)}})()}static{this.\u0275dir=B({type:r,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,o){n&1&&M("change",function(b){return o.onChange(b.target.value)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[se([Nn]),ee]})}}return r})(),De=(()=>{class r{constructor(t,n,o){this._element=t,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(Hr(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||r)(y(Ue),y(Ne),y(he,9))}}static{this.\u0275dir=B({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return r})(),Rn={provide:We,useExisting:ve(()=>Br),multi:!0};function Vr(r,e){return r==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${r}: ${e}`.slice(0,50))}function Pn(r){return r.split(":")[0]}var Br=(()=>{class r extends pt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;let n;if(Array.isArray(t)){let o=t.map(s=>this._getOptionId(s));n=(s,b)=>{s._setSelected(o.indexOf(b.toString())>-1)}}else n=(o,s)=>{o._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let o=[],s=n.selectedOptions;if(s!==void 0){let b=s;for(let S=0;S<b.length;S++){let L=b[S],fe=this._getOptionValue(L.value);o.push(fe)}}else{let b=n.options;for(let S=0;S<b.length;S++){let L=b[S];if(L.selected){let fe=this._getOptionValue(L.value);o.push(fe)}}}this.value=o,t(o)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=Pn(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=Te(r)))(o||r)}})()}static{this.\u0275dir=B({type:r,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,o){n&1&&M("change",function(b){return o.onChange(b.target)})("blur",function(){return o.onTouched()})},inputs:{compareWith:"compareWith"},features:[se([Rn]),ee]})}}return r})(),Ie=(()=>{class r{constructor(t,n,o){this._element=t,this._renderer=n,this._select=o,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(Vr(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Vr(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||r)(y(Ue),y(Ne),y(Br,9))}}static{this.\u0275dir=B({type:r,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return r})();var Gn=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=ye({type:r})}static{this.\u0275inj=_e({})}}return r})();var P=(()=>{class r{static withConfig(t){return{ngModule:r,providers:[{provide:Bt,useValue:t.callSetDisabledState??Wt}]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=ye({type:r})}static{this.\u0275inj=_e({imports:[Gn]})}}return r})();var Ln=new le("JWT_OPTIONS"),Wr=(()=>{class r{constructor(t=null){this.tokenGetter=t&&t.tokenGetter||function(){}}urlBase64Decode(t){let n=t.replace(/-/g,"+").replace(/_/g,"/");switch(n.length%4){case 0:break;case 2:{n+="==";break}case 3:{n+="=";break}default:throw new Error("Illegal base64url string!")}return this.b64DecodeUnicode(n)}b64decode(t){let n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o="";if(t=String(t).replace(/=+$/,""),t.length%4===1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(let s=0,b,S,L=0;S=t.charAt(L++);~S&&(b=s%4?b*64+S:S,s++%4)?o+=String.fromCharCode(255&b>>(-2*s&6)):0)S=n.indexOf(S);return o}b64DecodeUnicode(t){return decodeURIComponent(Array.prototype.map.call(this.b64decode(t),n=>"%"+("00"+n.charCodeAt(0).toString(16)).slice(-2)).join(""))}decodeToken(t=this.tokenGetter()){return t instanceof Promise?t.then(n=>this._decodeToken(n)):this._decodeToken(t)}_decodeToken(t){if(!t||t==="")return null;let n=t.split(".");if(n.length!==3)throw new Error("The inspected token doesn't appear to be a JWT. Check to make sure it has three parts and see https://jwt.io for more.");let o=this.urlBase64Decode(n[1]);if(!o)throw new Error("Cannot decode the token.");return JSON.parse(o)}getTokenExpirationDate(t=this.tokenGetter()){return t instanceof Promise?t.then(n=>this._getTokenExpirationDate(n)):this._getTokenExpirationDate(t)}_getTokenExpirationDate(t){let n;if(n=this.decodeToken(t),!n||!n.hasOwnProperty("exp"))return null;let o=new Date(0);return o.setUTCSeconds(n.exp),o}isTokenExpired(t=this.tokenGetter(),n){return t instanceof Promise?t.then(o=>this._isTokenExpired(o,n)):this._isTokenExpired(t,n)}_isTokenExpired(t,n){if(!t||t==="")return!0;let o=this.getTokenExpirationDate(t);return n=n||0,o===null?!1:!(o.valueOf()>new Date().valueOf()+n*1e3)}getAuthScheme(t,n){return typeof t=="function"?t(n):t}}return r.\u0275fac=function(t){return new(t||r)(G(Ln))},r.\u0275prov=H({token:r,factory:r.\u0275fac}),r})();var K=class r{constructor(e,t){this.router=e;this.http=t}helper=new Wr;apiURL="http://127.0.0.1:8081/Api";token;loggedUser;isloggedIn=!1;roles;login(e){let t={username:e.username,password:e.password};return this.http.post(this.apiURL+"/login",t,{observe:"response"})}saveToken(e){localStorage.setItem("jwt",e),this.token=e,this.isloggedIn=!0,this.decodeJWT()}getToken(){return this.token}decodeJWT(){if(this.token==null)return;let e=this.helper.decodeToken(this.token);this.roles=e.roles,this.loggedUser=e.sub,this.isloggedIn=!0}isAdmin(){return this.roles?this.roles.indexOf("ADMIN")>-1:!1}logout(){this.loggedUser=void 0,this.roles=void 0,this.token=void 0,this.isloggedIn=!1,localStorage.removeItem("jwt"),this.router.navigate(["/Login"])}setLoggedUserFromLocalStorage(e){this.loggedUser=e,this.isloggedIn=!0}loadToken(){typeof window<"u"&&(this.token=localStorage.getItem("jwt"))}isTokenExpired(){return this.helper.isTokenExpired(this.token)}static \u0275fac=function(t){return new(t||r)(G(R),G(it))};static \u0275prov=H({token:r,factory:r.\u0275fac,providedIn:"root"})};var vt=class r{constructor(e){this.authService=e}intercept(e,t){if(e.url.search("/Login")===-1){let o=this.authService.getToken(),s=e.clone({setHeaders:{Authorization:"Bearer "+o}});return t.handle(s)}return t.handle(e)}static \u0275fac=function(t){return new(t||r)(G(K))};static \u0275prov=H({token:r,factory:r.\u0275fac})};function $r(r){if(!(this instanceof $r))throw new Error("The 'Keycloak' constructor must be invoked with 'new'.");if(typeof r!="string"&&!zt(r))throw new Error("The 'Keycloak' constructor must be provided with a configuration object, or a URL to a JSON configuration file.");if(zt(r)){let i="oidcProvider"in r?["clientId"]:["url","realm","clientId"];for(let a of i)if(!r[a])throw new Error(`The configuration object is missing the required '${a}' property.`)}var e=this,t,n=[],o,s={enable:!0,callbackList:[],interval:5};e.didInitialize=!1;var b=!0,S=Xt(console.info),L=Xt(console.warn);globalThis.isSecureContext||L(`[KEYCLOAK] Keycloak JS must be used in a 'secure context' to function properly as it relies on browser APIs that are otherwise not available.
Continuing to run your application insecurely will lead to unexpected behavior and breakage.

For more information see: https://developer.mozilla.org/en-US/docs/Web/Security/Secure_Contexts`),e.init=function(i={}){if(e.didInitialize)throw new Error("A 'Keycloak' instance can only be initialized once.");e.didInitialize=!0,e.authenticated=!1,o=an();var a=["default","cordova","cordova-native"];if(a.indexOf(i.adapter)>-1?t=Tt(i.adapter):typeof i.adapter=="object"?t=i.adapter:window.Cordova||window.cordova?t=Tt("cordova"):t=Tt(),typeof i.useNonce<"u"&&(b=i.useNonce),typeof i.checkLoginIframe<"u"&&(s.enable=i.checkLoginIframe),i.checkLoginIframeInterval&&(s.interval=i.checkLoginIframeInterval),i.onLoad==="login-required"&&(e.loginRequired=!0),i.responseMode)if(i.responseMode==="query"||i.responseMode==="fragment")e.responseMode=i.responseMode;else throw"Invalid value for responseMode";if(i.flow){switch(i.flow){case"standard":e.responseType="code";break;case"implicit":e.responseType="id_token token";break;case"hybrid":e.responseType="code id_token token";break;default:throw"Invalid value for flow"}e.flow=i.flow}if(i.timeSkew!=null&&(e.timeSkew=i.timeSkew),i.redirectUri&&(e.redirectUri=i.redirectUri),i.silentCheckSsoRedirectUri&&(e.silentCheckSsoRedirectUri=i.silentCheckSsoRedirectUri),typeof i.silentCheckSsoFallback=="boolean"?e.silentCheckSsoFallback=i.silentCheckSsoFallback:e.silentCheckSsoFallback=!0,typeof i.pkceMethod<"u"){if(i.pkceMethod!=="S256"&&i.pkceMethod!==!1)throw new TypeError(`Invalid value for pkceMethod', expected 'S256' or false but got ${i.pkceMethod}.`);e.pkceMethod=i.pkceMethod}else e.pkceMethod="S256";typeof i.enableLogging=="boolean"?e.enableLogging=i.enableLogging:e.enableLogging=!1,i.logoutMethod==="POST"?e.logoutMethod="POST":e.logoutMethod="GET",typeof i.scope=="string"&&(e.scope=i.scope),typeof i.acrValues=="string"&&(e.acrValues=i.acrValues),typeof i.messageReceiveTimeout=="number"&&i.messageReceiveTimeout>0?e.messageReceiveTimeout=i.messageReceiveTimeout:e.messageReceiveTimeout=1e4,e.responseMode||(e.responseMode="fragment"),e.responseType||(e.responseType="code",e.flow="standard");var f=T(),p=T();p.promise.then(function(){e.onReady&&e.onReady(e.authenticated),f.setSuccess(e.authenticated)}).catch(function(c){f.setError(c)});var h=rn();function m(){var c=function(w){w||(C.prompt="none"),i.locale&&(C.locale=i.locale),e.login(C).then(function(){p.setSuccess()}).catch(function(V){p.setError(V)})},v=function(){return k(this,null,function*(){var w=document.createElement("iframe"),V=yield e.createLoginUrl({prompt:"none",redirectUri:e.silentCheckSsoRedirectUri});w.setAttribute("src",V),w.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),w.setAttribute("title","keycloak-silent-check-sso"),w.style.display="none",document.body.appendChild(w);var ie=function(oe){if(!(oe.origin!==window.location.origin||w.contentWindow!==oe.source)){var Q=ge(oe.data);me(Q,p),document.body.removeChild(w),window.removeEventListener("message",ie)}};window.addEventListener("message",ie)})},C={};switch(i.onLoad){case"check-sso":s.enable?Ft().then(function(){Xe().then(function(w){w?p.setSuccess():e.silentCheckSsoRedirectUri?v():c(!1)}).catch(function(w){p.setError(w)})}):e.silentCheckSsoRedirectUri?v():c(!1);break;case"login-required":c(!0);break;default:throw"Invalid value for onLoad"}}function l(){var c=ge(window.location.href);if(c&&window.history.replaceState(window.history.state,null,c.newUrl),c&&c.valid)return Ft().then(function(){me(c,p)}).catch(function(v){p.setError(v)});i.token&&i.refreshToken?(Ye(i.token,i.refreshToken,i.idToken),s.enable?Ft().then(function(){Xe().then(function(v){v?(e.onAuthSuccess&&e.onAuthSuccess(),p.setSuccess(),xt()):p.setSuccess()}).catch(function(v){p.setError(v)})}):e.updateToken(-1).then(function(){e.onAuthSuccess&&e.onAuthSuccess(),p.setSuccess()}).catch(function(v){e.onAuthError&&e.onAuthError(),i.onLoad?m():p.setError(v)})):i.onLoad?m():p.setSuccess()}return h.then(function(){sn().then(l).catch(function(c){f.setError(c)})}),h.catch(function(c){f.setError(c)}),f.promise},e.login=function(i){return t.login(i)};function fe(i){if(typeof crypto>"u"||typeof crypto.getRandomValues>"u")throw new Error("Web Crypto API is not available.");return crypto.getRandomValues(new Uint8Array(i))}function It(i){return Zr(i,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789")}function Zr(i,a){for(var f=fe(i),p=new Array(i),h=0;h<i;h++)p[h]=a.charCodeAt(f[h]%a.length);return String.fromCharCode.apply(null,p)}function Qr(i,a){return k(this,null,function*(){if(i!=="S256")throw new TypeError(`Invalid value for 'pkceMethod', expected 'S256' but got '${i}'.`);let f=new Uint8Array(yield Bn(a));return Hn(f).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")})}function en(i){var a={id_token:{acr:i}};return JSON.stringify(a)}e.createLoginUrl=function(i){return k(this,null,function*(){var a=qt(),f=qt(),p=t.redirectUri(i),h={state:a,nonce:f,redirectUri:encodeURIComponent(p),loginOptions:i};i&&i.prompt&&(h.prompt=i.prompt);var m;i&&i.action=="register"?m=e.endpoints.register():m=e.endpoints.authorize();var l=i&&i.scope||e.scope;l?l.indexOf("openid")===-1&&(l="openid "+l):l="openid";var c=m+"?client_id="+encodeURIComponent(e.clientId)+"&redirect_uri="+encodeURIComponent(p)+"&state="+encodeURIComponent(a)+"&response_mode="+encodeURIComponent(e.responseMode)+"&response_type="+encodeURIComponent(e.responseType)+"&scope="+encodeURIComponent(l);if(b&&(c=c+"&nonce="+encodeURIComponent(f)),i&&i.prompt&&(c+="&prompt="+encodeURIComponent(i.prompt)),i&&typeof i.maxAge=="number"&&(c+="&max_age="+encodeURIComponent(i.maxAge)),i&&i.loginHint&&(c+="&login_hint="+encodeURIComponent(i.loginHint)),i&&i.idpHint&&(c+="&kc_idp_hint="+encodeURIComponent(i.idpHint)),i&&i.action&&i.action!="register"&&(c+="&kc_action="+encodeURIComponent(i.action)),i&&i.locale&&(c+="&ui_locales="+encodeURIComponent(i.locale)),i&&i.acr){var v=en(i.acr);c+="&claims="+encodeURIComponent(v)}if((i&&i.acrValues||e.acrValues)&&(c+="&acr_values="+encodeURIComponent(i.acrValues||e.acrValues)),e.pkceMethod)try{let C=It(96),w=yield Qr(e.pkceMethod,C);h.pkceCodeVerifier=C,c+="&code_challenge="+w,c+="&code_challenge_method="+e.pkceMethod}catch(C){throw new Error("Failed to generate PKCE challenge.",{cause:C})}return o.add(h),c})},e.logout=function(i){return t.logout(i)},e.createLogoutUrl=function(i){if((i?.logoutMethod??e.logoutMethod)==="POST")return e.endpoints.logout();var f=e.endpoints.logout()+"?client_id="+encodeURIComponent(e.clientId)+"&post_logout_redirect_uri="+encodeURIComponent(t.redirectUri(i,!1));return e.idToken&&(f+="&id_token_hint="+encodeURIComponent(e.idToken)),f},e.register=function(i){return t.register(i)},e.createRegisterUrl=function(i){return k(this,null,function*(){return i||(i={}),i.action="register",yield e.createLoginUrl(i)})},e.createAccountUrl=function(i){var a=ne(),f=void 0;return typeof a<"u"&&(f=a+"/account?referrer="+encodeURIComponent(e.clientId)+"&referrer_uri="+encodeURIComponent(t.redirectUri(i))),f},e.accountManagement=function(){return t.accountManagement()},e.hasRealmRole=function(i){var a=e.realmAccess;return!!a&&a.roles.indexOf(i)>=0},e.hasResourceRole=function(i,a){if(!e.resourceAccess)return!1;var f=e.resourceAccess[a||e.clientId];return!!f&&f.roles.indexOf(i)>=0},e.loadUserProfile=function(){var i=ne()+"/account",a=new XMLHttpRequest;a.open("GET",i,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Authorization","bearer "+e.token);var f=T();return a.onreadystatechange=function(){a.readyState==4&&(a.status==200?(e.profile=JSON.parse(a.responseText),f.setSuccess(e.profile)):f.setError())},a.send(),f.promise},e.loadUserInfo=function(){var i=e.endpoints.userinfo(),a=new XMLHttpRequest;a.open("GET",i,!0),a.setRequestHeader("Accept","application/json"),a.setRequestHeader("Authorization","bearer "+e.token);var f=T();return a.onreadystatechange=function(){a.readyState==4&&(a.status==200?(e.userInfo=JSON.parse(a.responseText),f.setSuccess(e.userInfo)):f.setError())},a.send(),f.promise},e.isTokenExpired=function(i){if(!e.tokenParsed||!e.refreshToken&&e.flow!="implicit")throw"Not authenticated";if(e.timeSkew==null)return S("[KEYCLOAK] Unable to determine if token is expired as timeskew is not set"),!0;var a=e.tokenParsed.exp-Math.ceil(new Date().getTime()/1e3)+e.timeSkew;if(i){if(isNaN(i))throw"Invalid minValidity";a-=i}return a<0},e.updateToken=function(i){var a=T();if(!e.refreshToken)return a.setError(),a.promise;i=i||5;var f=function(){var h=!1;if(i==-1?(h=!0,S("[KEYCLOAK] Refreshing token: forced refresh")):(!e.tokenParsed||e.isTokenExpired(i))&&(h=!0,S("[KEYCLOAK] Refreshing token: token expired")),!h)a.setSuccess(!1);else{var m="grant_type=refresh_token&refresh_token="+e.refreshToken,l=e.endpoints.token();if(n.push(a),n.length==1){var c=new XMLHttpRequest;c.open("POST",l,!0),c.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c.withCredentials=!0,m+="&client_id="+encodeURIComponent(e.clientId);var v=new Date().getTime();c.onreadystatechange=function(){if(c.readyState==4)if(c.status==200){S("[KEYCLOAK] Token refreshed"),v=(v+new Date().getTime())/2;var C=JSON.parse(c.responseText);Ye(C.access_token,C.refresh_token,C.id_token,v),e.onAuthRefreshSuccess&&e.onAuthRefreshSuccess();for(var w=n.pop();w!=null;w=n.pop())w.setSuccess(!0)}else{L("[KEYCLOAK] Failed to refresh token"),c.status==400&&e.clearToken(),e.onAuthRefreshError&&e.onAuthRefreshError();for(var w=n.pop();w!=null;w=n.pop())w.setError(!0)}},c.send(m)}}};if(s.enable){var p=Xe();p.then(function(){f()}).catch(function(h){a.setError(h)})}else f();return a.promise},e.clearToken=function(){e.token&&(Ye(null,null,null),e.onAuthLogout&&e.onAuthLogout(),e.loginRequired&&e.login())};function ne(){if(typeof e.authServerUrl<"u")return e.authServerUrl.charAt(e.authServerUrl.length-1)=="/"?e.authServerUrl+"realms/"+encodeURIComponent(e.realm):e.authServerUrl+"/realms/"+encodeURIComponent(e.realm)}function tn(){return window.location.origin?window.location.origin:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")}function me(i,a){var f=i.code,p=i.error,h=i.prompt,m=new Date().getTime();if(i.kc_action_status&&e.onActionUpdate&&e.onActionUpdate(i.kc_action_status,i.kc_action),p){if(h!="none")if(i.error_description&&i.error_description==="authentication_expired")e.login(i.loginOptions);else{var l={error:p,error_description:i.error_description};e.onAuthError&&e.onAuthError(l),a&&a.setError(l)}else a&&a.setSuccess();return}else e.flow!="standard"&&(i.access_token||i.id_token)&&w(i.access_token,null,i.id_token,!0);if(e.flow!="implicit"&&f){var c="code="+f+"&grant_type=authorization_code",v=e.endpoints.token(),C=new XMLHttpRequest;C.open("POST",v,!0),C.setRequestHeader("Content-type","application/x-www-form-urlencoded"),c+="&client_id="+encodeURIComponent(e.clientId),c+="&redirect_uri="+i.redirectUri,i.pkceCodeVerifier&&(c+="&code_verifier="+i.pkceCodeVerifier),C.withCredentials=!0,C.onreadystatechange=function(){if(C.readyState==4)if(C.status==200){var V=JSON.parse(C.responseText);w(V.access_token,V.refresh_token,V.id_token,e.flow==="standard"),xt()}else e.onAuthError&&e.onAuthError(),a&&a.setError()},C.send(c)}function w(V,ie,oe,Q){m=(m+new Date().getTime())/2,Ye(V,ie,oe,m),b&&e.idTokenParsed&&e.idTokenParsed.nonce!=i.storedNonce?(S("[KEYCLOAK] Invalid nonce, clearing token"),e.clearToken(),a&&a.setError()):Q&&(e.onAuthSuccess&&e.onAuthSuccess(),a&&a.setSuccess())}}function rn(){var i=T(),a;typeof r=="string"&&(a=r);function f(l){l?e.endpoints={authorize:function(){return l.authorization_endpoint},token:function(){return l.token_endpoint},logout:function(){if(!l.end_session_endpoint)throw"Not supported by the OIDC server";return l.end_session_endpoint},checkSessionIframe:function(){if(!l.check_session_iframe)throw"Not supported by the OIDC server";return l.check_session_iframe},register:function(){throw'Redirection to "Register user" page not supported in standard OIDC mode'},userinfo:function(){if(!l.userinfo_endpoint)throw"Not supported by the OIDC server";return l.userinfo_endpoint}}:e.endpoints={authorize:function(){return ne()+"/protocol/openid-connect/auth"},token:function(){return ne()+"/protocol/openid-connect/token"},logout:function(){return ne()+"/protocol/openid-connect/logout"},checkSessionIframe:function(){return ne()+"/protocol/openid-connect/login-status-iframe.html"},thirdPartyCookiesIframe:function(){return ne()+"/protocol/openid-connect/3p-cookies/step1.html"},register:function(){return ne()+"/protocol/openid-connect/registrations"},userinfo:function(){return ne()+"/protocol/openid-connect/userinfo"}}}if(a){var p=new XMLHttpRequest;p.open("GET",a,!0),p.setRequestHeader("Accept","application/json"),p.onreadystatechange=function(){if(p.readyState==4)if(p.status==200||Kt(p)){var l=JSON.parse(p.responseText);e.authServerUrl=l["auth-server-url"],e.realm=l.realm,e.clientId=l.resource,f(null),i.setSuccess()}else i.setError()},p.send()}else{e.clientId=r.clientId;var h=r.oidcProvider;if(!h)e.authServerUrl=r.url,e.realm=r.realm,f(null),i.setSuccess();else if(typeof h=="string"){var m;h.charAt(h.length-1)=="/"?m=h+".well-known/openid-configuration":m=h+"/.well-known/openid-configuration";var p=new XMLHttpRequest;p.open("GET",m,!0),p.setRequestHeader("Accept","application/json"),p.onreadystatechange=function(){if(p.readyState==4)if(p.status==200||Kt(p)){var c=JSON.parse(p.responseText);f(c),i.setSuccess()}else i.setError()},p.send()}else f(h),i.setSuccess()}return i.promise}function Kt(i){return i.status==0&&i.responseText&&i.responseURL.startsWith("file:")}function Ye(i,a,f,p){if(e.tokenTimeoutHandle&&(clearTimeout(e.tokenTimeoutHandle),e.tokenTimeoutHandle=null),a?(e.refreshToken=a,e.refreshTokenParsed=$t(a)):(delete e.refreshToken,delete e.refreshTokenParsed),f?(e.idToken=f,e.idTokenParsed=$t(f)):(delete e.idToken,delete e.idTokenParsed),i){if(e.token=i,e.tokenParsed=$t(i),e.sessionId=e.tokenParsed.sid,e.authenticated=!0,e.subject=e.tokenParsed.sub,e.realmAccess=e.tokenParsed.realm_access,e.resourceAccess=e.tokenParsed.resource_access,p&&(e.timeSkew=Math.floor(p/1e3)-e.tokenParsed.iat),e.timeSkew!=null&&(S("[KEYCLOAK] Estimated time difference between browser and server is "+e.timeSkew+" seconds"),e.onTokenExpired)){var h=(e.tokenParsed.exp-new Date().getTime()/1e3+e.timeSkew)*1e3;S("[KEYCLOAK] Token expires in "+Math.round(h/1e3)+" s"),h<=0?e.onTokenExpired():e.tokenTimeoutHandle=setTimeout(e.onTokenExpired,h)}}else delete e.token,delete e.tokenParsed,delete e.subject,delete e.realmAccess,delete e.resourceAccess,e.authenticated=!1}function qt(){if(typeof crypto>"u"||typeof crypto.randomUUID>"u")throw new Error("Web Crypto API is not available.");return crypto.randomUUID()}function ge(i){var a=nn(i);if(a){var f=o.get(a.state);return f&&(a.valid=!0,a.redirectUri=f.redirectUri,a.storedNonce=f.nonce,a.prompt=f.prompt,a.pkceCodeVerifier=f.pkceCodeVerifier,a.loginOptions=f.loginOptions),a}}function nn(i){var a;switch(e.flow){case"standard":a=["code","state","session_state","kc_action_status","kc_action","iss"];break;case"implicit":a=["access_token","token_type","id_token","state","session_state","expires_in","kc_action_status","kc_action","iss"];break;case"hybrid":a=["access_token","token_type","id_token","code","state","session_state","expires_in","kc_action_status","kc_action","iss"];break}a.push("error"),a.push("error_description"),a.push("error_uri");var f=i.indexOf("?"),p=i.indexOf("#"),h,m;if(e.responseMode==="query"&&f!==-1?(h=i.substring(0,f),m=Yt(i.substring(f+1,p!==-1?p:i.length),a),m.paramsString!==""&&(h+="?"+m.paramsString),p!==-1&&(h+=i.substring(p))):e.responseMode==="fragment"&&p!==-1&&(h=i.substring(0,p),m=Yt(i.substring(p+1),a),m.paramsString!==""&&(h+="#"+m.paramsString)),m&&m.oauthParams){if(e.flow==="standard"||e.flow==="hybrid"){if((m.oauthParams.code||m.oauthParams.error)&&m.oauthParams.state)return m.oauthParams.newUrl=h,m.oauthParams}else if(e.flow==="implicit"&&(m.oauthParams.access_token||m.oauthParams.error)&&m.oauthParams.state)return m.oauthParams.newUrl=h,m.oauthParams}}function Yt(i,a){for(var f=i.split("&"),p={paramsString:"",oauthParams:{}},h=0;h<f.length;h++){var m=f[h].indexOf("="),l=f[h].slice(0,m);a.indexOf(l)!==-1?p.oauthParams[l]=f[h].slice(m+1):(p.paramsString!==""&&(p.paramsString+="&"),p.paramsString+=f[h])}return p}function T(){var i={setSuccess:function(a){i.resolve(a)},setError:function(a){i.reject(a)}};return i.promise=new Promise(function(a,f){i.resolve=a,i.reject=f}),i}function on(i,a,f){var p=null,h=new Promise(function(m,l){p=setTimeout(function(){l({error:f||"Promise is not settled within timeout of "+a+"ms"})},a)});return Promise.race([i,h]).finally(function(){clearTimeout(p)})}function Ft(){var i=T();if(!s.enable||s.iframe)return i.setSuccess(),i.promise;var a=document.createElement("iframe");s.iframe=a,a.onload=function(){var h=e.endpoints.authorize();h.charAt(0)==="/"?s.iframeOrigin=tn():s.iframeOrigin=h.substring(0,h.indexOf("/",8)),i.setSuccess()};var f=e.endpoints.checkSessionIframe();a.setAttribute("src",f),a.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),a.setAttribute("title","keycloak-session-iframe"),a.style.display="none",document.body.appendChild(a);var p=function(h){if(!(h.origin!==s.iframeOrigin||s.iframe.contentWindow!==h.source)&&(h.data=="unchanged"||h.data=="changed"||h.data=="error")){h.data!="unchanged"&&e.clearToken();for(var m=s.callbackList.splice(0,s.callbackList.length),l=m.length-1;l>=0;--l){var c=m[l];h.data=="error"?c.setError():c.setSuccess(h.data=="unchanged")}}};return window.addEventListener("message",p,!1),i.promise}function xt(){s.enable&&e.token&&setTimeout(function(){Xe().then(function(i){i&&xt()})},s.interval*1e3)}function Xe(){var i=T();if(s.iframe&&s.iframeOrigin){var a=e.clientId+" "+(e.sessionId?e.sessionId:"");s.callbackList.push(i);var f=s.iframeOrigin;s.callbackList.length==1&&s.iframe.contentWindow.postMessage(a,f)}else i.setSuccess();return i.promise}function sn(){var i=T();if((s.enable||e.silentCheckSsoRedirectUri)&&typeof e.endpoints.thirdPartyCookiesIframe=="function"){var a=document.createElement("iframe");a.setAttribute("src",e.endpoints.thirdPartyCookiesIframe()),a.setAttribute("sandbox","allow-storage-access-by-user-activation allow-scripts allow-same-origin"),a.setAttribute("title","keycloak-3p-check-iframe"),a.style.display="none",document.body.appendChild(a);var f=function(p){a.contentWindow===p.source&&(p.data!=="supported"&&p.data!=="unsupported"||(p.data==="unsupported"&&(L(`[KEYCLOAK] Your browser is blocking access to 3rd-party cookies, this means:

 - It is not possible to retrieve tokens without redirecting to the Keycloak server (a.k.a. no support for silent authentication).
 - It is not possible to automatically detect changes to the session status (such as the user logging out in another tab).

For more information see: https://www.keycloak.org/docs/latest/securing_apps/#_modern_browsers`),s.enable=!1,e.silentCheckSsoFallback&&(e.silentCheckSsoRedirectUri=!1)),document.body.removeChild(a),window.removeEventListener("message",f),i.setSuccess()))};window.addEventListener("message",f,!1)}else i.setSuccess();return on(i.promise,e.messageReceiveTimeout,"Timeout when waiting for 3rd party check iframe message.")}function Tt(i){if(!i||i=="default")return{login:function(l){return k(this,null,function*(){return window.location.assign(yield e.createLoginUrl(l)),T().promise})},logout:function(l){return k(this,null,function*(){if((l?.logoutMethod??e.logoutMethod)==="GET"){window.location.replace(e.createLogoutUrl(l));return}let v=e.createLogoutUrl(l),C=yield fetch(v,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({id_token_hint:e.idToken,client_id:e.clientId,post_logout_redirect_uri:t.redirectUri(l,!1)})});if(C.redirected){window.location.href=C.url;return}if(C.ok){window.location.reload();return}throw new Error("Logout failed, request returned an error code.")})},register:function(l){return k(this,null,function*(){return window.location.assign(yield e.createRegisterUrl(l)),T().promise})},accountManagement:function(){var l=e.createAccountUrl();if(typeof l<"u")window.location.href=l;else throw"Not supported by the OIDC server";return T().promise},redirectUri:function(l,c){return arguments.length==1&&(c=!0),l&&l.redirectUri?l.redirectUri:e.redirectUri?e.redirectUri:location.href}};if(i=="cordova"){s.enable=!1;var a=function(l,c,v){return window.cordova&&window.cordova.InAppBrowser?window.cordova.InAppBrowser.open(l,c,v):window.open(l,c,v)},f=function(l){return l&&l.cordovaOptions?Object.keys(l.cordovaOptions).reduce(function(c,v){return c[v]=l.cordovaOptions[v],c},{}):{}},p=function(l){return Object.keys(l).reduce(function(c,v){return c.push(v+"="+l[v]),c},[]).join(",")},h=function(l){var c=f(l);return c.location="no",l&&l.prompt=="none"&&(c.hidden="yes"),p(c)},m=function(){return e.redirectUri||"http://localhost"};return{login:function(l){return k(this,null,function*(){var c=T(),v=h(l),C=yield e.createLoginUrl(l),w=a(C,"_blank",v),V=!1,ie=!1,oe=function(){ie=!0,w.close()};return w.addEventListener("loadstart",function(Q){if(Q.url.indexOf(m())==0){var Ot=ge(Q.url);me(Ot,c),oe(),V=!0}}),w.addEventListener("loaderror",function(Q){if(!V)if(Q.url.indexOf(m())==0){var Ot=ge(Q.url);me(Ot,c),oe(),V=!0}else c.setError(),oe()}),w.addEventListener("exit",function(Q){ie||c.setError({reason:"closed_by_user"})}),c.promise})},logout:function(l){var c=T(),v=e.createLogoutUrl(l),C=a(v,"_blank","location=no,hidden=yes,clearcache=yes"),w;return C.addEventListener("loadstart",function(V){V.url.indexOf(m())==0&&C.close()}),C.addEventListener("loaderror",function(V){V.url.indexOf(m())==0||(w=!0),C.close()}),C.addEventListener("exit",function(V){w?c.setError():(e.clearToken(),c.setSuccess())}),c.promise},register:function(l){return k(this,null,function*(){var c=T(),v=yield e.createRegisterUrl(),C=h(l),w=a(v,"_blank",C);return w.addEventListener("loadstart",function(V){if(V.url.indexOf(m())==0){w.close();var ie=ge(V.url);me(ie,c)}}),c.promise})},accountManagement:function(){var l=e.createAccountUrl();if(typeof l<"u"){var c=a(l,"_blank","location=no");c.addEventListener("loadstart",function(v){v.url.indexOf(m())==0&&c.close()})}else throw"Not supported by the OIDC server"},redirectUri:function(l){return m()}}}if(i=="cordova-native")return s.enable=!1,{login:function(l){return k(this,null,function*(){var c=T(),v=yield e.createLoginUrl(l);return universalLinks.subscribe("keycloak",function(C){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var w=ge(C.url);me(w,c)}),window.cordova.plugins.browsertab.openUrl(v),c.promise})},logout:function(l){var c=T(),v=e.createLogoutUrl(l);return universalLinks.subscribe("keycloak",function(C){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close(),e.clearToken(),c.setSuccess()}),window.cordova.plugins.browsertab.openUrl(v),c.promise},register:function(l){return k(this,null,function*(){var c=T(),v=yield e.createRegisterUrl(l);return universalLinks.subscribe("keycloak",function(C){universalLinks.unsubscribe("keycloak"),window.cordova.plugins.browsertab.close();var w=ge(C.url);me(w,c)}),window.cordova.plugins.browsertab.openUrl(v),c.promise})},accountManagement:function(){var l=e.createAccountUrl();if(typeof l<"u")window.cordova.plugins.browsertab.openUrl(l);else throw"Not supported by the OIDC server"},redirectUri:function(l){return l&&l.redirectUri?l.redirectUri:e.redirectUri?e.redirectUri:"http://localhost"}};throw"invalid adapter type: "+i}let Ae="kc-callback-";var Ut=function(){if(!(this instanceof Ut))return new Ut;localStorage.setItem("kc-test","test"),localStorage.removeItem("kc-test");var i=this;function a(){let m=Date.now();for(let[l,c]of p()){let v=h(c);(v===null||v<m)&&localStorage.removeItem(l)}}function f(){for(let[m]of p())localStorage.removeItem(m)}function p(){return Object.entries(localStorage).filter(([m])=>m.startsWith(Ae))}function h(m){let l;try{l=JSON.parse(m)}catch{return null}return zt(l)&&"expires"in l&&typeof l.expires=="number"?l.expires:null}i.get=function(m){if(m){var l=Ae+m,c=localStorage.getItem(l);return c&&(localStorage.removeItem(l),c=JSON.parse(c)),a(),c}},i.add=function(m){a();let l=Ae+m.state,c=JSON.stringify(q(j({},m),{expires:Date.now()+60*60*1e3}));try{localStorage.setItem(l,c)}catch{f(),localStorage.setItem(l,c)}}},Nt=function(){if(!(this instanceof Nt))return new Nt;var i=this;i.get=function(h){if(h){var m=f(Ae+h);if(p(Ae+h,"",a(-100)),m)return JSON.parse(m)}},i.add=function(h){p(Ae+h.state,JSON.stringify(h),a(60))},i.removeItem=function(h){p(h,"",a(-100))};var a=function(h){var m=new Date;return m.setTime(m.getTime()+h*60*1e3),m},f=function(h){for(var m=h+"=",l=document.cookie.split(";"),c=0;c<l.length;c++){for(var v=l[c];v.charAt(0)==" ";)v=v.substring(1);if(v.indexOf(m)==0)return v.substring(m.length,v.length)}return""},p=function(h,m,l){var c=h+"="+m+"; expires="+l.toUTCString()+"; ";document.cookie=c}};function an(){try{return new Ut}catch{}return new Nt}function Xt(i){return function(){e.enableLogging&&i.apply(console,Array.prototype.slice.call(arguments))}}}var zr=$r;function Hn(r){let e=String.fromCodePoint(...r);return btoa(e)}function Bn(r){return k(this,null,function*(){let t=new TextEncoder().encode(r);if(typeof crypto>"u"||typeof crypto.subtle>"u")throw new Error("Web Crypto API is not available.");return yield crypto.subtle.digest("SHA-256",t)})}function $t(r){let[e,t]=r.split(".");if(typeof t!="string")throw new Error("Unable to decode token, payload not found.");let n;try{n=Wn(t)}catch(o){throw new Error("Unable to decode token, payload is not a valid Base64URL value.",{cause:o})}try{return JSON.parse(n)}catch(o){throw new Error("Unable to decode token, payload is not a valid JSON value.",{cause:o})}}function Wn(r){let e=r.replaceAll("-","+").replaceAll("_","/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw new Error("Input is not of the correct length.")}try{return $n(e)}catch{return atob(e)}}function $n(r){return decodeURIComponent(atob(r).replace(/(.)/g,(e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function zt(r){return typeof r=="object"&&r!==null}var ae=function(r){return r[r.OnAuthError=0]="OnAuthError",r[r.OnAuthLogout=1]="OnAuthLogout",r[r.OnAuthRefreshError=2]="OnAuthRefreshError",r[r.OnAuthRefreshSuccess=3]="OnAuthRefreshSuccess",r[r.OnAuthSuccess=4]="OnAuthSuccess",r[r.OnReady=5]="OnReady",r[r.OnTokenExpired=6]="OnTokenExpired",r[r.OnActionUpdate=7]="OnActionUpdate",r}(ae||{}),_t=class{constructor(e,t){this.router=e,this.keycloakAngular=t}canActivate(e,t){return k(this,null,function*(){try{return this.authenticated=yield this.keycloakAngular.isLoggedIn(),this.roles=yield this.keycloakAngular.getUserRoles(!0),yield this.isAccessAllowed(e,t)}catch(n){throw new Error("An error happened during access validation. Details:"+n)}})}},pe=(()=>{class r{constructor(){this._keycloakEvents$=new Ze}bindsKeycloakEvents(){this._instance.onAuthError=t=>{this._keycloakEvents$.next({args:t,type:ae.OnAuthError})},this._instance.onAuthLogout=()=>{this._keycloakEvents$.next({type:ae.OnAuthLogout})},this._instance.onAuthRefreshSuccess=()=>{this._keycloakEvents$.next({type:ae.OnAuthRefreshSuccess})},this._instance.onAuthRefreshError=()=>{this._keycloakEvents$.next({type:ae.OnAuthRefreshError})},this._instance.onAuthSuccess=()=>{this._keycloakEvents$.next({type:ae.OnAuthSuccess})},this._instance.onTokenExpired=()=>{this._keycloakEvents$.next({type:ae.OnTokenExpired})},this._instance.onActionUpdate=t=>{this._keycloakEvents$.next({args:t,type:ae.OnActionUpdate})},this._instance.onReady=t=>{this._keycloakEvents$.next({args:t,type:ae.OnReady})}}loadExcludedUrls(t){let n=[];for(let o of t){let s;typeof o=="string"?s={urlPattern:new RegExp(o,"i"),httpMethods:[]}:s={urlPattern:new RegExp(o.url,"i"),httpMethods:o.httpMethods},n.push(s)}return n}initServiceValues({enableBearerInterceptor:t=!0,loadUserProfileAtStartUp:n=!1,bearerExcludedUrls:o=[],authorizationHeaderName:s="Authorization",bearerPrefix:b="Bearer",initOptions:S,updateMinValidity:L=20,shouldAddToken:fe=()=>!0,shouldUpdateToken:It=()=>!0}){this._enableBearerInterceptor=t,this._loadUserProfileAtStartUp=n,this._authorizationHeaderName=s,this._bearerPrefix=b.trim().concat(" "),this._excludedUrls=this.loadExcludedUrls(o),this._silentRefresh=S?S.flow==="implicit":!1,this._updateMinValidity=L,this.shouldAddToken=fe,this.shouldUpdateToken=It}init(){return k(this,arguments,function*(t={}){this.initServiceValues(t);let{config:n,initOptions:o}=t;this._instance=new zr(n),this.bindsKeycloakEvents();let s=yield this._instance.init(o);return s&&this._loadUserProfileAtStartUp&&(yield this.loadUserProfile()),s})}login(){return k(this,arguments,function*(t={}){yield this._instance.login(t),this._loadUserProfileAtStartUp&&(yield this.loadUserProfile())})}logout(t){return k(this,null,function*(){let n={redirectUri:t};yield this._instance.logout(n),this._userProfile=void 0})}register(){return k(this,arguments,function*(t={action:"register"}){yield this._instance.register(t)})}isUserInRole(t,n){let o;return o=this._instance.hasResourceRole(t,n),o||(o=this._instance.hasRealmRole(t)),o}getUserRoles(t=!0,n){let o=[];if(this._instance.resourceAccess&&Object.keys(this._instance.resourceAccess).forEach(s=>{if(n&&n!==s)return;let S=this._instance.resourceAccess[s].roles||[];o=o.concat(S)}),t&&this._instance.realmAccess){let s=this._instance.realmAccess.roles||[];o.push(...s)}return o}isLoggedIn(){return this._instance?this._instance.authenticated:!1}isTokenExpired(t=0){return this._instance.isTokenExpired(t)}updateToken(){return k(this,arguments,function*(t=this._updateMinValidity){if(this._silentRefresh){if(this.isTokenExpired())throw new Error("Failed to refresh the token, or the session is expired");return!0}if(!this._instance)throw new Error("Keycloak Angular library is not initialized.");try{return yield this._instance.updateToken(t)}catch{return!1}})}loadUserProfile(t=!1){return k(this,null,function*(){if(this._userProfile&&!t)return this._userProfile;if(!this._instance.authenticated)throw new Error("The user profile was not loaded as the user is not logged in.");return this._userProfile=yield this._instance.loadUserProfile()})}getToken(){return k(this,null,function*(){return this._instance.token})}getUsername(){if(!this._userProfile)throw new Error("User not logged in or user profile was not loaded.");return this._userProfile.username}clearToken(){this._instance.clearToken()}addTokenToHeader(t=new nt){return xe(this.getToken()).pipe(Qe(n=>n?t.set(this._authorizationHeaderName,this._bearerPrefix+n):t))}getKeycloakInstance(){return this._instance}get excludedUrls(){return this._excludedUrls}get enableBearerInterceptor(){return this._enableBearerInterceptor}get keycloakEvents$(){return this._keycloakEvents$}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=H({token:r,factory:r.\u0275fac})}}return r})(),zn=(()=>{class r{constructor(t){this.keycloak=t}conditionallyUpdateToken(t){return k(this,null,function*(){return this.keycloak.shouldUpdateToken(t)?yield this.keycloak.updateToken():!0})}isUrlExcluded({method:t,url:n},{urlPattern:o,httpMethods:s}){let b=s.length===0||s.join().indexOf(t.toUpperCase())>-1,S=o.test(n);return b&&S}intercept(t,n){let{enableBearerInterceptor:o,excludedUrls:s}=this.keycloak;return!o||!this.keycloak.shouldAddToken(t)||s.findIndex(S=>this.isUrlExcluded(t,S))>-1?n.handle(t):Qt([xe(this.conditionallyUpdateToken(t)),Zt(this.keycloak.isLoggedIn())]).pipe(Rt(([S,L])=>L?this.handleRequestWithTokenHeader(t,n):n.handle(t)))}handleRequestWithTokenHeader(t,n){return this.keycloak.addTokenToHeader(t.headers).pipe(Rt(o=>{let s=t.clone({headers:o});return n.handle(s)}))}static{this.\u0275fac=function(n){return new(n||r)(G(pe))}}static{this.\u0275prov=H({token:r,factory:r.\u0275fac})}}return r})(),Jn=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=ye({type:r})}static{this.\u0275inj=_e({providers:[pe,{provide:ot,useClass:zn,multi:!0}],imports:[O]})}}return r})(),Jr=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=ye({type:r})}static{this.\u0275inj=_e({imports:[Jn]})}}return r})();function Kn(r,e){r&1&&(d(0,"li",12)(1,"a",13),g(2,"Liste Produits"),u()())}function qn(r,e){if(r&1){let t=Y();d(0,"li",4)(1,"a",14)(2,"span"),g(3),u()(),d(4,"ul",6)(5,"li")(6,"a",15),M("click",function(){W(t);let o=E();return $(o.onLogout())}),g(7,"Logout"),u()(),d(8,"li")(9,"a",7),g(10,"Profile"),u()()()()}if(r&2){let t=E();_(3),rt(" ",t.profile.username," ")}}function Yn(r,e){if(r&1){let t=Y();d(0,"button",16),M("click",function(){W(t);let o=E();return $(o.onLogin())}),g(1,"Login"),u()}}var yt=class r{constructor(e){this.keycloakService=e}title="agular_Keycloak_depart";profile;ngOnInit(){let e=this.keycloakService.isLoggedIn();console.log("res "+e),e&&this.keycloakService.loadUserProfile().then(t=>{this.profile=t})}onLogout(){this.keycloakService.logout(window.location.origin)}onLogin(){return k(this,null,function*(){yield this.keycloakService.login({redirectUri:window.location.origin})})}static \u0275fac=function(t){return new(t||r)(y(pe))};static \u0275cmp=U({type:r,selectors:[["app-root"]],standalone:!0,features:[se([{provide:ot,useClass:vt,multi:!0}]),N],decls:19,vars:2,consts:[[1,"navbar","navbar-expand-sm","bg-dark","navbar-dark"],["href","#",1,"navbar-brand"],[1,"navbar-nav"],["class","nav-item",4,"ngIf"],[1,"nav-item","dropdown"],["href","#","id","navbardrop","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbardrop",1,"dropdown-menu"],["href","#",1,"dropdown-item"],["routerLink","/Cars",1,"dropdown-item"],[1,"navbar-nav","ml-auto"],["class","nav-item dropdown",4,"ngIf"],["ngIf","!profile"],[1,"nav-item"],["routerLink","/Cars",1,"nav-link"],["href","#","id","navbardrop","data-bs-toggle","dropdown",1,"nav-link","dropdown-toggle"],[1,"dropdown-item",3,"click"],[1,"btn","btn-success",3,"click"]],template:function(t,n){t&1&&(d(0,"nav",0)(1,"a",1),g(2,"Gestion Cars"),u(),d(3,"ul",2),D(4,Kn,3,0,"li",3),d(5,"li",4)(6,"a",5),g(7," Cars "),u(),d(8,"ul",6)(9,"li")(10,"a",7),g(11,"Ajouter"),u()(),d(12,"li")(13,"a",8),g(14,"Lister"),u()()()()(),d(15,"ul",9),D(16,qn,11,1,"li",10)(17,Yn,2,0,"ng-template",11),u()(),we(18,"router-outlet")),t&2&&(_(4),A("ngIf",n.keycloakService.getUserRoles().includes("ADMIN")),_(12),A("ngIf",n.profile))},dependencies:[Cr,vr,_r,P,O,de],styles:[".dropdown-item[_ngcontent-%COMP%]{cursor:pointer}"]})};var re=class r{constructor(e,t){this.http=e;this.authService=t}Url="http://127.0.0.1:8080/Cars/api";createAuthorizationHeader(){this.authService.loadToken();let e=this.authService.getToken();return e="Bearer "+e,new nt({Authorization:e})}getAllCars(){let e=this.createAuthorizationHeader();return this.http.get(this.Url,{headers:e})}getCarById(e){let t=this.createAuthorizationHeader();return this.http.get(`${this.Url}/${e}`,{headers:t})}getCarsByFG(e){let t=this.createAuthorizationHeader();return this.http.get(`${this.Url}/FamilyGroup/${e}`,{headers:t})}getAllFGs(){let e=this.createAuthorizationHeader();return this.http.get(this.Url+"/FamilyGroups",{headers:e})}deleteCar(e){let t=this.createAuthorizationHeader();return this.http.delete(`${this.Url}/${e}`,{headers:t})}UpdateCar(e){let t=this.createAuthorizationHeader();return this.http.put(this.Url,e,{headers:t})}AddCar(e){let t=this.createAuthorizationHeader();return this.http.post(this.Url,e,{headers:t})}AddFG(e){let t=this.createAuthorizationHeader();return this.http.post(this.Url+"/FamilyGroups",e,{headers:t})}static \u0275fac=function(t){return new(t||r)(G(it),G(K))};static \u0275prov=H({token:r,factory:r.\u0275fac,providedIn:"root"})};function Xn(r,e){if(r&1){let t=Y();d(0,"div")(1,"input",14),x("ngModelChange",function(o){W(t);let s=E();return F(s.searchTerm,o)||(s.searchTerm=o),$(o)}),M("keyup",function(){W(t);let o=E();return $(o.search())}),u()()}if(r&2){let t=E();_(),I("ngModel",t.searchTerm)}}function Zn(r,e){if(r&1&&(d(0,"option",17),g(1),u()),r&2){let t=e.$implicit;A("value",t.id),_(),z(t.group_Name)}}function Qn(r,e){if(r&1){let t=Y();d(0,"div")(1,"select",15),x("ngModelChange",function(o){W(t);let s=E();return F(s.searchFG,o)||(s.searchFG=o),$(o)}),D(2,Zn,2,2,"option",16),u()()}if(r&2){let t=E();_(),I("ngModel",t.searchFG),_(),A("ngForOf",t.FGs)}}function ei(r,e){if(r&1){let t=Y();d(0,"button",18),M("click",function(){W(t);let o=E();return $(o.search())}),g(1,"Search"),u()}}function ti(r,e){if(r&1){let t=Y();d(0,"button",19),M("click",function(){W(t);let o=E();return $(o.resetSearch())}),g(1,"Reset"),u()}}function ri(r,e){r&1&&(d(0,"th"),g(1,"Manage"),u())}function ni(r,e){if(r&1){let t=Y();d(0,"td")(1,"button",20),M("click",function(){W(t);let o=E().$implicit,s=E();return $(s.deleteCar(o.carID))}),we(2,"i",21),u(),g(3," \xA0 "),d(4,"button",22),M("click",function(){W(t);let o=E().$implicit,s=E();return $(s.redirect(o.carID))}),we(5,"i",23),u()()}}function ii(r,e){if(r&1&&(d(0,"tr")(1,"td"),g(2),u(),d(3,"td"),g(4),u(),d(5,"td"),g(6),u(),d(7,"td"),g(8),u(),d(9,"td"),g(10),u(),D(11,ni,6,0,"td",12),u()),r&2){let t=e.$implicit,n=E();_(2),z(t.carID),_(2),z(t.carModel),_(2),z(t.carBrand),_(2),z(t.price),_(2),z(t.familyGroup.group_Name),_(),A("ngIf",n.Admin)}}var wt=class r{constructor(e,t,n){this.carService=e;this.router=t;this.authService=n}cars=[];FGs;FG_ID;searchBy="model";searchTerm="";searchFG=0;Admin;ngOnInit(){this.getAllCars(),this.carService.getAllFGs().subscribe(e=>{this.FGs=e},e=>{confirm(e)}),this.authService.loadToken(),this.authService.decodeJWT(),this.Admin=this.authService.isAdmin(),console.log(this.Admin)}getAllCars(){this.carService.getAllCars().subscribe(e=>{this.cars=e},e=>{console.log(e)})}deleteCar(e){e!=null&&confirm("Are you sure you want to delete this car?")&&this.carService.deleteCar(e).subscribe(()=>{this.getAllCars(),console.log(`Car with ID ${e} deleted successfully`)},n=>{console.error("Error deleting car:",n)})}resetSearch(){this.searchTerm="",this.searchFG=0,this.getAllCars()}search(){this.searchBy==="model"?this.cars=this.cars.filter(e=>e.carModel.toLowerCase().includes(this.searchTerm.toLowerCase())):this.searchBy==="brand"?this.cars=this.cars.filter(e=>e.carBrand.toLowerCase().includes(this.searchTerm.toLowerCase())):this.searchBy==="category"&&this.carService.getCarsByFG(this.searchFG).subscribe(e=>{this.cars=e})}redirect(e){e!=null&&this.router.navigate(["/UpdateCar/"+e])}static \u0275fac=function(t){return new(t||r)(y(re),y(R),y(K))};static \u0275cmp=U({type:r,selectors:[["app-cars"]],standalone:!0,features:[N],decls:31,vars:8,consts:[[1,"card","shadow","mb-4"],[1,"card-body"],[1,"form-group"],["for","searchBy"],["id","searchBy",1,"form-control",3,"ngModelChange","change","ngModel"],["value","model"],["value","category"],[3,"ngSwitch"],[4,"ngSwitchCase"],["class","btn btn-primary mt-2",3,"click",4,"ngIf"],["type","submit","class","btn btn-primary mt-2",3,"click",4,"ngIf"],[1,"table","table-striped","mt-4"],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","text","placeholder","Enter model",1,"form-control",3,"ngModelChange","keyup","ngModel"],[1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"btn","btn-primary","mt-2",3,"click"],["type","submit",1,"btn","btn-primary","mt-2",3,"click"],["type","button",1,"btn","btn-danger",3,"click"],[1,"fa-solid","fa-trash"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa-regular","fa-pen-to-square"]],template:function(t,n){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2)(3,"label",3),g(4,"Search By:"),u(),d(5,"select",4),x("ngModelChange",function(s){return F(n.searchBy,s)||(n.searchBy=s),s}),M("change",function(){return n.resetSearch()}),d(6,"option",5),g(7,"Model"),u(),d(8,"option",6),g(9,"Family Group"),u()()(),d(10,"div",7),D(11,Xn,2,1,"div",8)(12,Qn,3,2,"div",8),u(),D(13,ei,2,0,"button",9)(14,ti,2,0,"button",10),d(15,"table",11)(16,"thead")(17,"tr")(18,"th"),g(19,"Id"),u(),d(20,"th"),g(21,"Car Model"),u(),d(22,"th"),g(23,"Car Brand"),u(),d(24,"th"),g(25,"Price"),u(),d(26,"th"),g(27,"Family"),u(),D(28,ri,2,0,"th",12),u()(),d(29,"tbody"),D(30,ii,12,6,"tr",13),u()()()()),t&2&&(_(5),I("ngModel",n.searchBy),_(5),A("ngSwitch",n.searchBy),_(),A("ngSwitchCase","model"),_(),A("ngSwitchCase","category"),_(),A("ngIf",n.searchBy!="model"),_(),A("ngIf",n.searchBy=="model"),_(14),A("ngIf",n.Admin),_(2),A("ngForOf",n.cars))},dependencies:[O,ue,de,lr,cr,P,De,Ie,X,he,te,Z]})};function oi(r,e){if(r&1&&(d(0,"option",11),g(1),u()),r&2){let t=e.$implicit;A("value",t.id),_(),z(t.group_Name)}}var bt=class r{constructor(e,t){this.carService=e;this.router=t}newCar={carID:0,carModel:"",carBrand:"",price:0,familyGroup:{id:0,group_Name:"",dateOfCreation:new Date}};FGs;FG_ID;ngOnInit(){this.carService.getAllFGs().subscribe(e=>{console.table(e),this.FGs=e},e=>{confirm(e)})}addCar(){let e=this.FGs.find(t=>t.id==this.FG_ID);e!=null&&(this.newCar.familyGroup=e),this.carService.AddCar(this.newCar).subscribe(t=>{console.log(t),this.router.navigate(["/"])},t=>{console.log(t)})}static \u0275fac=function(t){return new(t||r)(y(re),y(R))};static \u0275cmp=U({type:r,selectors:[["app-add-car"]],standalone:!0,features:[N],decls:19,vars:5,consts:[[1,"form-group"],["for","carModel"],["type","text","id","carModel",1,"form-control",3,"ngModelChange","ngModel"],["for","carBrand"],["type","text","id","carBrand",1,"form-control",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price",1,"form-control",3,"ngModelChange","ngModel"],["for","familyGroup"],["id","familyGroup",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,n){t&1&&(d(0,"div",0)(1,"label",1),g(2,"Car Model"),u(),d(3,"input",2),x("ngModelChange",function(s){return F(n.newCar.carModel,s)||(n.newCar.carModel=s),s}),u()(),d(4,"div",0)(5,"label",3),g(6,"Car Brand"),u(),d(7,"input",4),x("ngModelChange",function(s){return F(n.newCar.carBrand,s)||(n.newCar.carBrand=s),s}),u()(),d(8,"div",0)(9,"label",5),g(10,"Price"),u(),d(11,"input",6),x("ngModelChange",function(s){return F(n.newCar.price,s)||(n.newCar.price=s),s}),u()(),d(12,"div",0)(13,"label",7),g(14,"Family Group"),u(),d(15,"select",8),x("ngModelChange",function(s){return F(n.newCar.familyGroup.id,s)||(n.newCar.familyGroup.id=s),s}),D(16,oi,2,2,"option",9),u()(),d(17,"button",10),M("click",function(){return n.addCar()}),g(18,"Add Car"),u()),t&2&&(_(3),I("ngModel",n.newCar.carModel),_(4),I("ngModel",n.newCar.carBrand),_(4),I("ngModel",n.newCar.price),_(4),I("ngModel",n.newCar.familyGroup.id),_(),A("ngForOf",n.FGs))},dependencies:[P,De,Ie,X,ze,he,te,Z,O,ue]})};function si(r,e){if(r&1&&(d(0,"option",11),g(1),u()),r&2){let t=e.$implicit;A("value",t.id),_(),z(t.group_Name)}}var St=class r{constructor(e,t,n){this.carService=e;this.router=t;this.route=n}newCar;FGs;FG_ID;ngOnInit(){let e=this.route.snapshot.params.id;this.carService.getCarById(e).subscribe(t=>{console.table(t),this.newCar=t},t=>{confirm(t)}),this.carService.getAllFGs().subscribe(t=>{console.table(t),this.FGs=t},t=>{confirm(t)})}UpdateCar(){let e=this.FGs.find(t=>t.id==this.FG_ID);e!=null&&(this.newCar.familyGroup=e),this.carService.UpdateCar(this.newCar).subscribe(t=>{console.log(t),this.router.navigate(["/"])},t=>{console.log(t)})}static \u0275fac=function(t){return new(t||r)(y(re),y(R),y(gr))};static \u0275cmp=U({type:r,selectors:[["app-update-car"]],standalone:!0,features:[N],decls:19,vars:5,consts:[[1,"form-group"],["for","carModel"],["type","text","id","carModel",1,"form-control",3,"ngModelChange","ngModel"],["for","carBrand"],["type","text","id","carBrand",1,"form-control",3,"ngModelChange","ngModel"],["for","price"],["type","number","id","price",1,"form-control",3,"ngModelChange","ngModel"],["for","familyGroup"],["id","familyGroup",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-primary",3,"click"],[3,"value"]],template:function(t,n){t&1&&(d(0,"div",0)(1,"label",1),g(2,"Car Model"),u(),d(3,"input",2),x("ngModelChange",function(s){return F(n.newCar.carModel,s)||(n.newCar.carModel=s),s}),u()(),d(4,"div",0)(5,"label",3),g(6,"Car Brand"),u(),d(7,"input",4),x("ngModelChange",function(s){return F(n.newCar.carBrand,s)||(n.newCar.carBrand=s),s}),u()(),d(8,"div",0)(9,"label",5),g(10,"Price"),u(),d(11,"input",6),x("ngModelChange",function(s){return F(n.newCar.price,s)||(n.newCar.price=s),s}),u()(),d(12,"div",0)(13,"label",7),g(14,"Family Group"),u(),d(15,"select",8),x("ngModelChange",function(s){return F(n.newCar.familyGroup.id,s)||(n.newCar.familyGroup.id=s),s}),D(16,si,2,2,"option",9),u()(),d(17,"button",10),M("click",function(){return n.UpdateCar()}),g(18,"Update Car"),u()),t&2&&(_(3),I("ngModel",n.newCar.carModel),_(4),I("ngModel",n.newCar.carBrand),_(4),I("ngModel",n.newCar.price),_(4),I("ngModel",n.newCar.familyGroup.id),_(),A("ngForOf",n.FGs))},dependencies:[P,De,Ie,X,ze,he,te,Z,O,ue]})};var Fe=class{id;group_Name;dateOfCreation;constructor(e,t,n){this.group_Name=e,this.dateOfCreation=t,n&&(this.id=n)}toString(){return`FamilyGroup { id=${this.id}, groupName='${this.group_Name}', dateOfCreation='${this.dateOfCreation}' }`}};var At=class r{constructor(){}ajout;FamilyGroupUpdated=new Fe("",new Date);FgUpdated=new Ce;saveFG(){this.FgUpdated.emit(this.FamilyGroupUpdated)}static \u0275fac=function(t){return new(t||r)};static \u0275cmp=U({type:r,selectors:[["app-update-fg"]],inputs:{ajout:"ajout",FamilyGroupUpdated:"FamilyGroupUpdated"},outputs:{FgUpdated:"FgUpdated"},standalone:!0,features:[N],decls:12,vars:4,consts:[["type","text","name","group_Name",1,"form-control","w-25",3,"ngModelChange","ngModel"],["type","Date","name","dateOfCreation","placeholder","Entrez un nom de cat\xE9gorie...",1,"form-control",3,"ngModelChange","ngModel"],[1,"mt-2"],["type","submit",1,"btn","btn-success",3,"click","disabled"]],template:function(t,n){t&1&&(d(0,"form")(1,"div")(2,"label"),g(3,"Group Name"),u(),d(4,"input",0),x("ngModelChange",function(s){return F(n.FamilyGroupUpdated.group_Name,s)||(n.FamilyGroupUpdated.group_Name=s),s}),u()(),d(5,"div")(6,"label"),g(7,"Date Of Creation"),u(),d(8,"input",1),x("ngModelChange",function(s){return F(n.FamilyGroupUpdated.dateOfCreation,s)||(n.FamilyGroupUpdated.dateOfCreation=s),s}),u()(),d(9,"div",2)(10,"button",3),M("click",function(){return n.saveFG()}),g(11),u()()()),t&2&&(_(4),I("ngModel",n.FamilyGroupUpdated.group_Name),_(4),I("ngModel",n.FamilyGroupUpdated.dateOfCreation),_(2),A("disabled",!n.FamilyGroupUpdated.group_Name),_(),rt(" ",n.ajout?"Add":"Update"," "))},dependencies:[P,gt,X,te,ft,Z,$e,O]})};function ai(r,e){if(r&1){let t=Y();d(0,"app-update-fg",7),M("FgUpdated",function(o){W(t);let s=E();return $(s.FgUpdated(o))}),u()}if(r&2){let t=E();A("FamilyGroupUpdated",t.FamilyGroupUpdated)("ajout",t.ajout)}}function li(r,e){r&1&&(d(0,"th"),g(1,"Manage"),u())}function ci(r,e){if(r&1){let t=Y();d(0,"td")(1,"button",8),M("click",function(){W(t);let o=E().$implicit,s=E();return $(s.updateFG(o))}),we(2,"i",9),u()()}}function ui(r,e){if(r&1&&(d(0,"tr")(1,"td"),g(2),u(),d(3,"td"),g(4),u(),D(5,ci,3,0,"td",5),u()),r&2){let t=e.$implicit,n=E();_(2),z(t.group_Name),_(2),z(t.dateOfCreation),_(),A("ngIf",n.Admin)}}var kt=class r{constructor(e,t,n){this.carService=e;this.router=t;this.authService=n}ajout=!0;FamilyGroupUpdated=new Fe("",new Date);FGs;Admin;Name;connected;ngOnInit(){this.loadFGS(),this.authService.loadToken(),this.authService.decodeJWT(),this.Admin=this.authService.isAdmin(),console.log(this.Admin),this.Name=this.authService.loggedUser,this.connected=this.authService.isloggedIn}loadFGS(){this.carService.getAllFGs().subscribe(e=>{console.table(e),this.FGs=e},e=>{confirm(e)})}FgUpdated(e){this.carService.AddFG(e).subscribe(t=>{console.log(t)},t=>{console.log(t)})}updateFG(e){console.log(e),this.FamilyGroupUpdated=e,this.ajout=!1}static \u0275fac=function(t){return new(t||r)(y(re),y(R),y(K))};static \u0275cmp=U({type:r,selectors:[["app-family-groups"]],standalone:!0,features:[N],decls:14,vars:3,consts:[[1,"card","shadow","mb-4"],[1,"col-sm-4","col-md-4","col-lg-4","mb-4"],[3,"FamilyGroupUpdated","ajout","FgUpdated",4,"ngIf"],[1,"card-body"],[1,"table","table-striped"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"FgUpdated","FamilyGroupUpdated","ajout"],["type","button",1,"btn","btn-warning",3,"click"],[1,"fa-regular","fa-pen-to-square"]],template:function(t,n){t&1&&(d(0,"div",0)(1,"div",1),D(2,ai,1,2,"app-update-fg",2),u(),d(3,"div",3)(4,"table",4)(5,"thead")(6,"tr")(7,"th"),g(8,"Group Name"),u(),d(9,"th"),g(10,"Date of Creation"),u(),D(11,li,2,0,"th",5),u()(),d(12,"tbody"),D(13,ui,6,3,"tr",6),u()()()()),t&2&&(_(2),A("ngIf",n.Admin),_(9),A("ngIf",n.Admin),_(2),A("ngForOf",n.FGs))},dependencies:[P,O,ue,de,At]})};var Mt=class{username;password;roles};function di(r,e){r&1&&(d(0,"div",8)(1,"strong"),g(2,"login ou mot de passe erron\xE9s.."),u()())}var Et=class r{constructor(e,t){this.authService=e;this.router=t}user=new Mt;err=0;ngOnInit(){}onLoggedin(){this.authService.login(this.user).subscribe({next:e=>{let t=e.headers.get("Authorization");this.authService.saveToken(t),this.router.navigate(["/"])},error:e=>{console.log("err "+e.message),this.err=1}})}static \u0275fac=function(t){return new(t||r)(y(K),y(R))};static \u0275cmp=U({type:r,selectors:[["app-login"]],standalone:!0,features:[N],decls:16,vars:3,consts:[[1,"container","mt-5"],[1,"row","justify-content-md-center"],[1,"col-md-4"],["class","alert alert-danger",4,"ngIf"],[1,"form-group"],["type","text","name","username",1,"form-control",3,"ngModelChange","ngModel"],["type","password","name","password",1,"form-control",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-success",3,"click"],[1,"alert","alert-danger"]],template:function(t,n){t&1&&(d(0,"div",0)(1,"div",1)(2,"div",2),D(3,di,3,0,"div",3),d(4,"form")(5,"div",4)(6,"label"),g(7,"Nom Utilisateur :"),u(),d(8,"input",5),x("ngModelChange",function(s){return F(n.user.username,s)||(n.user.username=s),s}),u()(),d(9,"div",4)(10,"label"),g(11,"Mot de passe :"),u(),d(12,"input",6),x("ngModelChange",function(s){return F(n.user.password,s)||(n.user.password=s),s}),u()(),d(13,"div",1)(14,"button",7),M("click",function(){return n.onLoggedin()}),g(15,"Connexion"),u()()()()()()),t&2&&(_(3),A("ngIf",n.err==1),_(5),I("ngModel",n.user.username),_(4),I("ngModel",n.user.password))},dependencies:[P,gt,X,te,ft,Z,$e,O,de]})};var Vt=class r{static \u0275fac=function(t){return new(t||r)};static \u0275cmp=U({type:r,selectors:[["app-forbidden"]],standalone:!0,features:[N],decls:3,vars:0,consts:[[1,"alert","alert-danger"]],template:function(t,n){t&1&&(d(0,"div",0)(1,"strong"),g(2," You Are NOT Allowed !!"),u()())}})};var Jt=(r,e)=>{let t=tt(K),n=tt(R);return t.loadToken(),t.decodeJWT(),t.isAdmin()?!0:(n.navigate(["app-forbidden"]),!1)};var Dt=class r extends _t{constructor(t,n){super(t,n);this.router=t;this.keycloak=n}isAccessAllowed(t,n){return k(this,null,function*(){this.authenticated||(yield this.keycloak.login({redirectUri:window.location.origin+n.url}));let o=t.data.roles;return!Array.isArray(o)||o.length===0?!0:o.every(s=>this.roles.includes(s))})}static \u0275fac=function(n){return new(n||r)(G(R),G(pe))};static \u0275prov=H({token:r,factory:r.\u0275fac,providedIn:"root"})};var qr=[{path:"assets/*",redirectTo:"/assets"},{path:"Cars",component:wt,canActivate:[Dt],data:{roles:["ADMIN"]}},{path:"AddCar",component:bt,canActivate:[Jt]},{path:"UpdateCar/:id",component:St,canActivate:[Jt]},{path:"FamilyGroups",component:kt},{path:"Login",component:Et},{path:"app-forbidden",component:Vt},{path:"",redirectTo:"/Cars",pathMatch:"full"}];function hi(r){return()=>new Promise((e,t)=>{typeof window<"u"?r.init({config:{url:"http://localhost:8090",realm:"fury-realm",clientId:"car-app"},initOptions:{onLoad:"check-sso",silentCheckSsoRedirectUri:window.location.origin+"/assets/silent-check-sso.html"}}).then(()=>{e(!0)}).catch(n=>{t(n)}):e(!0)})}var Yr={providers:[yr(qr),fr(),ur(dr()),tr(P,hr,Jr),{provide:ir,useFactory:hi,multi:!0,deps:[pe]}]};var pi={providers:[mr()]},Xr=ar(Yr,pi);var fi=()=>pr(yt,Xr),Ss=fi;export{Ss as a};
